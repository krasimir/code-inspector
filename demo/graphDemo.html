<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>code-inspector</title>
  <style>
    * {
      box-sizing: border-box;
    }
    pre {
      width: 100%;
      height: 600px;
      resize: none;
      overflow: scroll;
    }
    .container {
      display: grid;
      grid-template-columns: 40% 60%;
    }
    .container > div {
      border-top: solid 1px #999;
    }
    .container > div + div {
      border-left: solid 1px #999;
      padding: 1em;
    }
    section {
      white-space: pre;
      overflow: scroll;
    }
  </style>
  <script src="https://unpkg.com/mermaid@8.4.8/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({
      securityLevel: 'loose',
      theme: 'forest',
      flowchart: {
        useMaxWidth: true,
        htmlLabels: false,
      },
    });
  </script>
</head>
<body>
  <p>This demo is generated by <code>src/__tests__/graph.spec.ts</code> file.</p>
  <div class="container">
    <div>
      <pre class="js">const ANSWER = 42;
function test(value, anotherOne, fooBar) {
  return value ? ANSWER : null;
}

function foobar() {
  const ANSWER = 100;
  const mult = v => v * 2;
  function sqrtAnd(v) {
    return Math.sqrt(v) + ANSWER;
  }
  const x = ANSWER * mult(2);
  console.log(ANSWER);
}

if (ANSWER === 42) {
  test('no');
} else {
  test('yes');
}
</pre>
      <section class="preview-in-mermaid">graph TB
Program-1:1-21:1("Program") --- VariableDeclarator-1:7-1:18("ANSWER")
Program-1:1-21:1("Program") --- FunctionDeclaration-2:1-4:2("test()")
FunctionDeclaration-2:1-4:2("test()") ---|return| ConditionalExpression-3:10-3:31{"value?"}
FunctionDeclaration-2:1-4:2("test()") --- Identifier-2:15-2:20("value")
FunctionDeclaration-2:1-4:2("test()") --- Identifier-2:22-2:32("anotherOne")
FunctionDeclaration-2:1-4:2("test()") --- Identifier-2:34-2:40("fooBar")
Program-1:1-21:1("Program") --- FunctionDeclaration-6:1-14:2("foobar()")
FunctionDeclaration-6:1-14:2("foobar()") --- VariableDeclarator-7:9-7:21("ANSWER")
FunctionDeclaration-6:1-14:2("foobar()") --- VariableDeclarator-8:9-8:26("mult")
FunctionDeclaration-6:1-14:2("foobar()") --- FunctionDeclaration-9:3-11:4("sqrtAnd()")
FunctionDeclaration-9:3-11:4("sqrtAnd()") ---|return| BinaryExpression-10:12-10:33("Math.sqrt(…) + ANSWER")
FunctionDeclaration-9:3-11:4("sqrtAnd()") --- Identifier-9:20-9:21("v")
FunctionDeclaration-6:1-14:2("foobar()") --- VariableDeclarator-12:9-12:29("x")
VariableDeclarator-12:9-12:29("x") --- BinaryExpression-12:13-12:29("ANSWER * mult(…)")
BinaryExpression-12:13-12:29("ANSWER * mult(…)") -.- VariableDeclarator-7:9-7:21("ANSWER")</section>
    </div>
    <div class="mermaid">graph TB
Program-1:1-21:1("Program") --- VariableDeclarator-1:7-1:18("ANSWER")
Program-1:1-21:1("Program") --- FunctionDeclaration-2:1-4:2("test()")
FunctionDeclaration-2:1-4:2("test()") ---|return| ConditionalExpression-3:10-3:31{"value?"}
FunctionDeclaration-2:1-4:2("test()") --- Identifier-2:15-2:20("value")
FunctionDeclaration-2:1-4:2("test()") --- Identifier-2:22-2:32("anotherOne")
FunctionDeclaration-2:1-4:2("test()") --- Identifier-2:34-2:40("fooBar")
Program-1:1-21:1("Program") --- FunctionDeclaration-6:1-14:2("foobar()")
FunctionDeclaration-6:1-14:2("foobar()") --- VariableDeclarator-7:9-7:21("ANSWER")
FunctionDeclaration-6:1-14:2("foobar()") --- VariableDeclarator-8:9-8:26("mult")
FunctionDeclaration-6:1-14:2("foobar()") --- FunctionDeclaration-9:3-11:4("sqrtAnd()")
FunctionDeclaration-9:3-11:4("sqrtAnd()") ---|return| BinaryExpression-10:12-10:33("Math.sqrt(…) + ANSWER")
FunctionDeclaration-9:3-11:4("sqrtAnd()") --- Identifier-9:20-9:21("v")
FunctionDeclaration-6:1-14:2("foobar()") --- VariableDeclarator-12:9-12:29("x")
VariableDeclarator-12:9-12:29("x") --- BinaryExpression-12:13-12:29("ANSWER * mult(…)")
BinaryExpression-12:13-12:29("ANSWER * mult(…)") -.- VariableDeclarator-7:9-7:21("ANSWER")</div>
  <script src="../browser/code-inspector.js"></script>
</body>
</html>